<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Editing Plan - Task-Focused Workflow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .top-nav {
            background: #2c3e50;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            flex-wrap: wrap;
            border-bottom: 3px solid #34495e;
        }
        .top-nav a {
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            display: inline-block;
            transition: all 0.3s;
            font-weight: 500;
            border-bottom: 3px solid transparent;
        }
        .top-nav a:hover {
            background: #34495e;
            border-bottom: 3px solid #667eea;
        }
        .top-nav a.active {
            background: #34495e;
            border-bottom: 3px solid #667eea;
        }

        .workflow-controls {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .current-focus {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .timer {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            font-family: monospace;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .task-sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 2px solid #e0e0e0;
            padding: 20px;
            overflow-y: auto;
        }

        .task-category {
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .task-category:hover {
            transform: translateX(5px);
            border-color: #667eea;
        }

        .task-category.active {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .task-category.completed {
            opacity: 0.6;
            background: #e8f5e9;
        }

        .task-header {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .task-icon {
            font-size: 1.5em;
        }

        .task-stats {
            padding: 10px 15px;
            background: #f8f9fa;
            font-size: 0.9em;
            color: #666;
            border-top: 1px solid #e0e0e0;
        }

        .work-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .work-area h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .timeline-visual {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid #e0e0e0;
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .timeline-bar {
            height: 60px;
            background: linear-gradient(to right, #ecf0f1, #bdc3c7);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .timeline-segment {
            position: absolute;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.85em;
            border-right: 2px solid white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .timeline-segment:hover {
            filter: brightness(1.1);
            transform: scaleY(1.1);
            z-index: 10;
        }

        .placement-list {
            margin-top: 20px;
        }

        .placement-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .placement-item:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .placement-item.placed {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .placement-info {
            flex: 1;
        }

        .placement-time {
            font-family: monospace;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .placement-desc {
            color: #666;
            font-size: 0.95em;
        }

        .placement-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .add-placement {
            margin-top: 20px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px dashed #bdc3c7;
        }

        .add-placement h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
        }

        .quality-checklist {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .quality-checklist h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .quality-item {
            padding: 10px;
            margin-bottom: 10px;
            background: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quality-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .task-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
            }

            .workflow-controls {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ Video Editing Plan</h1>
            <p>Focus on One Task Type at a Time - Maximize Quality & Efficiency</p>
        </header>

        <nav class="top-nav">
            <a href="../index.html">üè† Home</a>
            <a href="postproduction_helper.html">üîç Post-Production Helper</a>
            <a href="video_editing_plan.html" class="active">üìã Video Editing Plan</a>
            <a href="file_inventory.html">üìÅ File Inventory</a>
        </nav>

        <div class="workflow-controls">
            <div class="current-focus">
                Current Focus: <span id="currentTask">Select a task to begin</span>
            </div>
            <div class="timer">
                ‚è±Ô∏è <span id="timer">00:00:00</span>
            </div>
            <div>
                <button class="btn btn-primary" onclick="startTimer()">Start Timer</button>
                <button class="btn btn-secondary" onclick="pauseTimer()">Pause</button>
                <button class="btn btn-danger" onclick="resetTimer()">Reset</button>
            </div>
        </div>

        <div class="main-content">
            <div class="task-sidebar">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">üìã Task Categories</h3>
                
                <div class="task-category" data-task="transcript" onclick="selectTask('transcript')">
                    <div class="task-header">
                        <div class="task-name">üìù Transcript Review</div>
                        <div class="task-icon">‚úì</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-transcript">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-transcript"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="broll" onclick="selectTask('broll')">
                    <div class="task-header">
                        <div class="task-name">üé• B-Roll Placement</div>
                        <div class="task-icon">üéûÔ∏è</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-broll">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-broll"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="graphics" onclick="selectTask('graphics')">
                    <div class="task-header">
                        <div class="task-name">üé® Graphics & Titles</div>
                        <div class="task-icon">üìä</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-graphics">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-graphics"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="music" onclick="selectTask('music')">
                    <div class="task-header">
                        <div class="task-name">üéµ Music & Audio</div>
                        <div class="task-icon">üéº</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-music">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-music"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="subtitles" onclick="selectTask('subtitles')">
                    <div class="task-header">
                        <div class="task-name">üí¨ Subtitles & Captions</div>
                        <div class="task-icon">üìù</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-subtitles">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-subtitles"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="transitions" onclick="selectTask('transitions')">
                    <div class="task-header">
                        <div class="task-name">‚ú® Transitions & Effects</div>
                        <div class="task-icon">üåü</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-transitions">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-transitions"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="colorcorrection" onclick="selectTask('colorcorrection')">
                    <div class="task-header">
                        <div class="task-name">üé® Color Correction</div>
                        <div class="task-icon">üåà</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-colorcorrection">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-colorcorrection"></div></div>
                    </div>
                </div>

                <div class="task-category" data-task="finalreview" onclick="selectTask('finalreview')">
                    <div class="task-header">
                        <div class="task-name">‚úÖ Final Review</div>
                        <div class="task-icon">üéØ</div>
                    </div>
                    <div class="task-stats">
                        <div>Items: <span id="stat-finalreview">0</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 0%;" id="progress-finalreview"></div></div>
                    </div>
                </div>
            </div>

            <div class="work-area" id="workArea">
                <h2>üëã Welcome to Your Video Editing Plan</h2>
                
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-value" id="totalTasks">0</div>
                        <div class="stat-label">Total Tasks</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="completedTasks">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalTime">0:00</div>
                        <div class="stat-label">Estimated Time</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="completionPercent">0%</div>
                        <div class="stat-label">Progress</div>
                    </div>
                </div>

                <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; border-left: 4px solid #2196f3;">
                    <h3 style="color: #1976d2; margin-bottom: 10px;">üéØ Workflow Principles</h3>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Batch Similar Tasks:</strong> Work on all items of the same type together</li>
                        <li><strong>Single Focus:</strong> Complete one category before moving to the next</li>
                        <li><strong>Quality First:</strong> Use the checklist to maintain high standards</li>
                        <li><strong>Time Tracking:</strong> Monitor how long each task type takes</li>
                        <li><strong>Systematic Approach:</strong> Follow the timeline from start to finish</li>
                    </ul>
                </div>

                <div class="timeline-visual" style="margin-top: 30px;">
                    <div class="timeline-header">
                        <span>Video Timeline Overview</span>
                        <span>Total Duration: <span id="videoDuration">00:00</span></span>
                    </div>
                    <div class="timeline-bar" id="timelineBar">
                        <!-- Timeline segments will be added dynamically -->
                    </div>
                </div>

                <p style="margin-top: 20px; color: #666; text-align: center; font-size: 1.1em;">
                    üëà Select a task category from the sidebar to begin planning your edit
                </p>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentTaskType = null;
        let tasks = {
            transcript: [],
            broll: [],
            graphics: [],
            music: [],
            subtitles: [],
            transitions: [],
            colorcorrection: [],
            finalreview: []
        };
        let timerInterval = null;
        let timerSeconds = 0;
        let timerRunning = false;

        // Load saved data from localStorage
        function loadData() {
            const saved = localStorage.getItem('videoEditingPlan');
            if (saved) {
                tasks = JSON.parse(saved);
                updateAllStats();
            }
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('videoEditingPlan', JSON.stringify(tasks));
        }

        // Timer functions
        function startTimer() {
            if (!timerRunning) {
                timerRunning = true;
                timerInterval = setInterval(() => {
                    timerSeconds++;
                    updateTimerDisplay();
                }, 1000);
            }
        }

        function pauseTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timer').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // Task selection
        function selectTask(taskType) {
            currentTaskType = taskType;
            
            // Update sidebar active state
            document.querySelectorAll('.task-category').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelector(`[data-task="${taskType}"]`).classList.add('active');
            
            // Update current focus display
            const taskNames = {
                transcript: 'Transcript Review',
                broll: 'B-Roll Placement',
                graphics: 'Graphics & Titles',
                music: 'Music & Audio',
                subtitles: 'Subtitles & Captions',
                transitions: 'Transitions & Effects',
                colorcorrection: 'Color Correction',
                finalreview: 'Final Review'
            };
            document.getElementById('currentTask').textContent = taskNames[taskType];
            
            // Render work area
            renderWorkArea(taskType);
        }

        // Render work area for selected task
        function renderWorkArea(taskType) {
            const taskIcons = {
                transcript: 'üìù',
                broll: 'üé•',
                graphics: 'üé®',
                music: 'üéµ',
                subtitles: 'üí¨',
                transitions: '‚ú®',
                colorcorrection: 'üé®',
                finalreview: '‚úÖ'
            };

            const taskNames = {
                transcript: 'Transcript Review',
                broll: 'B-Roll Placement',
                graphics: 'Graphics & Titles',
                music: 'Music & Audio',
                subtitles: 'Subtitles & Captions',
                transitions: 'Transitions & Effects',
                colorcorrection: 'Color Correction',
                finalreview: 'Final Review'
            };

            const taskDescriptions = {
                transcript: 'Review and mark sections of the transcript where edits are needed',
                broll: 'Place B-roll footage over sections of the main timeline',
                graphics: 'Add titles, lower thirds, and graphic overlays',
                music: 'Add background music and audio effects',
                subtitles: 'Add and sync subtitles throughout the video',
                transitions: 'Add transitions between cuts and scenes',
                colorcorrection: 'Apply color correction and grading to clips',
                finalreview: 'Final quality check and polish pass'
            };

            const workArea = document.getElementById('workArea');
            const taskList = tasks[taskType];

            let html = `
                <h2>${taskIcons[taskType]} ${taskNames[taskType]}</h2>
                <p style="color: #666; margin-bottom: 20px;">${taskDescriptions[taskType]}</p>

                <div class="timeline-visual">
                    <div class="timeline-header">
                        <span>Task Timeline</span>
                        <span>${taskList.length} items planned</span>
                    </div>
                    <div class="timeline-bar" id="taskTimeline">
                        ${renderTaskTimeline(taskList)}
                    </div>
                </div>

                <div class="placement-list">
                    <h3 style="margin-bottom: 15px; color: #2c3e50;">Planned Placements</h3>
                    ${taskList.length === 0 ? '<p style="color: #666; text-align: center; padding: 20px;">No items added yet. Use the form below to add your first item.</p>' : ''}
                    ${taskList.map((item, index) => `
                        <div class="placement-item ${item.completed ? 'placed' : ''}">
                            <div class="placement-info">
                                <div class="placement-time">${item.startTime} - ${item.endTime}</div>
                                <div class="placement-desc">${item.description}</div>
                                ${item.notes ? `<div style="font-size: 0.85em; color: #999; margin-top: 5px;">üìù ${item.notes}</div>` : ''}
                            </div>
                            <div class="placement-actions">
                                ${!item.completed ? `<button class="btn btn-success" onclick="markComplete('${taskType}', ${index})">‚úì Done</button>` : `<button class="btn btn-secondary" onclick="markIncomplete('${taskType}', ${index})">‚Ü∫ Undo</button>`}
                                <button class="btn btn-danger" onclick="deleteItem('${taskType}', ${index})">üóëÔ∏è Delete</button>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="add-placement">
                    <h3>‚ûï Add New ${taskNames[taskType]} Item</h3>
                    <form onsubmit="addItem(event, '${taskType}')">
                        <div class="form-group">
                            <label>Start Time (MM:SS or HH:MM:SS)</label>
                            <input type="text" id="startTime" placeholder="00:30" required pattern="([0-9]{1,2}:)?[0-9]{1,2}:[0-9]{2}">
                        </div>
                        <div class="form-group">
                            <label>End Time (MM:SS or HH:MM:SS)</label>
                            <input type="text" id="endTime" placeholder="01:15" required pattern="([0-9]{1,2}:)?[0-9]{1,2}:[0-9]{2}">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" id="description" placeholder="Describe what goes here..." required>
                        </div>
                        <div class="form-group">
                            <label>Notes (Optional)</label>
                            <textarea id="notes" placeholder="Additional notes, file names, settings, etc." rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Add to Plan</button>
                    </form>
                </div>

                <div class="quality-checklist">
                    <h3>‚ú® Quality Checklist for ${taskNames[taskType]}</h3>
                    ${getQualityChecklist(taskType)}
                </div>
            `;

            workArea.innerHTML = html;
        }

        // Render task timeline visualization
        function renderTaskTimeline(taskList) {
            if (taskList.length === 0) {
                return '<div style="text-align: center; line-height: 60px; color: #999;">No items to display</div>';
            }

            // Sort by start time
            const sorted = [...taskList].sort((a, b) => timeToSeconds(a.startTime) - timeToSeconds(b.startTime));
            
            return sorted.map((item, index) => {
                const colors = ['#3498db', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6', '#1abc9c', '#e67e22'];
                const color = colors[index % colors.length];
                const opacity = item.completed ? '0.5' : '1';
                
                return `<div style="position: relative; margin: 5px 0; height: 50px;">
                    <div style="position: absolute; left: 0; background: ${color}; opacity: ${opacity}; padding: 5px 10px; border-radius: 4px; font-size: 0.85em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;">
                        ${item.startTime} - ${item.endTime}: ${item.description}
                    </div>
                </div>`;
            }).join('');
        }

        // Get quality checklist for task type
        function getQualityChecklist(taskType) {
            const checklists = {
                transcript: [
                    'All dialogue is properly transcribed',
                    'Filler words marked for removal',
                    'Key sections highlighted',
                    'Pacing notes added'
                ],
                broll: [
                    'B-roll matches narration content',
                    'Smooth transitions in/out',
                    'No distracting elements',
                    'Proper duration (not too long/short)',
                    'Color matches main footage'
                ],
                graphics: [
                    'Text is readable at target resolution',
                    'Consistent font usage',
                    'Proper contrast and colors',
                    'Animations are smooth',
                    'No spelling errors'
                ],
                music: [
                    'Music complements mood',
                    'Audio levels balanced',
                    'No copyright issues',
                    'Smooth fade in/out',
                    'Doesn\'t overpower dialogue'
                ],
                subtitles: [
                    'Synced with audio perfectly',
                    'Proper reading speed',
                    'Correct spelling and grammar',
                    'Consistent styling',
                    'Line breaks make sense'
                ],
                transitions: [
                    'Transitions serve a purpose',
                    'Not overused',
                    'Timing feels natural',
                    'Matches video style',
                    'Renders without glitches'
                ],
                colorcorrection: [
                    'Consistent color across scenes',
                    'Proper exposure',
                    'Skin tones look natural',
                    'No clipping in highlights/shadows',
                    'Matches intended mood'
                ],
                finalreview: [
                    'Watched full video start to finish',
                    'Audio levels consistent throughout',
                    'No visual glitches',
                    'Pacing feels right',
                    'All edits are intentional',
                    'Export settings verified'
                ]
            };

            return checklists[taskType].map((item, index) => `
                <div class="quality-item">
                    <input type="checkbox" id="quality-${taskType}-${index}">
                    <label for="quality-${taskType}-${index}">${item}</label>
                </div>
            `).join('');
        }

        // Add new item
        function addItem(event, taskType) {
            event.preventDefault();
            
            const item = {
                startTime: document.getElementById('startTime').value,
                endTime: document.getElementById('endTime').value,
                description: document.getElementById('description').value,
                notes: document.getElementById('notes').value,
                completed: false,
                addedAt: new Date().toISOString()
            };

            tasks[taskType].push(item);
            saveData();
            updateAllStats();
            renderWorkArea(taskType);
        }

        // Mark item complete
        function markComplete(taskType, index) {
            tasks[taskType][index].completed = true;
            saveData();
            updateAllStats();
            renderWorkArea(taskType);
        }

        // Mark item incomplete
        function markIncomplete(taskType, index) {
            tasks[taskType][index].completed = false;
            saveData();
            updateAllStats();
            renderWorkArea(taskType);
        }

        // Delete item
        function deleteItem(taskType, index) {
            if (confirm('Are you sure you want to delete this item?')) {
                tasks[taskType].splice(index, 1);
                saveData();
                updateAllStats();
                renderWorkArea(taskType);
            }
        }

        // Convert time string to seconds
        function timeToSeconds(timeStr) {
            const parts = timeStr.split(':').map(Number);
            if (parts.length === 2) {
                return parts[0] * 60 + parts[1];
            } else if (parts.length === 3) {
                return parts[0] * 3600 + parts[1] * 60 + parts[2];
            }
            return 0;
        }

        // Update all statistics
        function updateAllStats() {
            let totalTasks = 0;
            let completedTasks = 0;

            Object.keys(tasks).forEach(taskType => {
                const taskList = tasks[taskType];
                const total = taskList.length;
                const completed = taskList.filter(t => t.completed).length;
                const percentage = total > 0 ? (completed / total * 100) : 0;

                totalTasks += total;
                completedTasks += completed;

                const statEl = document.getElementById(`stat-${taskType}`);
                const progressEl = document.getElementById(`progress-${taskType}`);
                
                if (statEl) statEl.textContent = `${completed}/${total}`;
                if (progressEl) progressEl.style.width = `${percentage}%`;

                // Mark category as completed if all items done
                const categoryEl = document.querySelector(`[data-task="${taskType}"]`);
                if (categoryEl) {
                    if (total > 0 && completed === total) {
                        categoryEl.classList.add('completed');
                    } else {
                        categoryEl.classList.remove('completed');
                    }
                }
            });

            // Update overall stats
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('completedTasks').textContent = completedTasks;
            
            const overallPercent = totalTasks > 0 ? Math.round(completedTasks / totalTasks * 100) : 0;
            document.getElementById('completionPercent').textContent = `${overallPercent}%`;

            // Estimate total time (rough estimate: 2 minutes per task on average)
            const estimatedMinutes = totalTasks * 2;
            const hours = Math.floor(estimatedMinutes / 60);
            const minutes = estimatedMinutes % 60;
            document.getElementById('totalTime').textContent = `${hours}:${String(minutes).padStart(2, '0')}`;
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            updateAllStats();
        });
    </script>
</body>
</html>