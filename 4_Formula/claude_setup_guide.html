<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Setup Guide - Ollama + Qdrant</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            min-height: 100vh;
            padding-top: 0;
        }

        .top-nav {
            background: #2c3e50;
            display: flex;
            justify-content: center;
            gap: 5px;
            padding: 0;
            flex-wrap: wrap;
            border-bottom: 3px solid #34495e;
            margin: -20px -20px 20px -20px;
        }
        .top-nav a {
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            transition: all 0.3s;
            font-size: 1em;
            font-weight: 500;
            border-bottom: 3px solid transparent;
        }
        .top-nav a:hover {
            background: #34495e;
            border-bottom: 3px solid #1e3c72;
        }
        .top-nav a.active {
            background: #34495e;
            border-bottom: 3px solid #1e3c72;
        }

        .header {
            text-align: center;
            color: white;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .header h1 { font-size: 2.2em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }

        .architecture {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .arch-box {
            background: rgba(255,255,255,0.15);
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            text-align: center;
            min-width: 140px;
        }

        .arch-box .arch-icon { font-size: 1.8em; }
        .arch-box .arch-label { font-size: 0.85em; margin-top: 4px; opacity: 0.8; }
        .arch-box .arch-name { font-weight: 700; }

        .arch-arrow {
            color: rgba(255,255,255,0.5);
            font-size: 2em;
            display: flex;
            align-items: center;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .step-card {
            background: white;
            border-radius: 12px;
            padding: 25px 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
            border-left: 6px solid;
            position: relative;
        }

        .step-card h2 {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
            flex-shrink: 0;
        }

        .step-card p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .step-card ul {
            color: #555;
            line-height: 1.8;
            margin-left: 20px;
            margin-bottom: 12px;
        }

        .code-block {
            background: #1e1e2e;
            color: #cdd6f4;
            padding: 16px 20px;
            border-radius: 8px;
            font-family: 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            overflow-x: auto;
            margin: 12px 0;
            position: relative;
        }

        .code-block .copy-code-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: #cdd6f4;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            transition: all 0.2s;
        }

        .code-block .copy-code-btn:hover {
            background: rgba(255,255,255,0.25);
        }

        .code-label {
            font-size: 0.75em;
            color: #89b4fa;
            margin-bottom: 4px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .code-block .comment { color: #6c7086; }
        .code-block .key { color: #89b4fa; }
        .code-block .value { color: #a6e3a1; }
        .code-block .flag { color: #f9e2af; }

        .config-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .config-table th {
            background: #f0f4ff;
            text-align: left;
            padding: 10px 14px;
            font-size: 0.85em;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
        }

        .config-table td {
            padding: 10px 14px;
            border-bottom: 1px solid #edf2f7;
            font-size: 0.9em;
            color: #2d3748;
        }

        .config-table td code {
            background: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Cascadia Code', monospace;
            font-size: 0.85em;
        }

        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }

        .badge-green { background: #d4edda; color: #155724; }
        .badge-blue { background: #cce5ff; color: #004085; }
        .badge-orange { background: #fff3cd; color: #856404; }

        .step-prereq { border-color: #e67e22; }
        .step-ollama { border-color: #27ae60; }
        .step-qdrant { border-color: #9b59b6; }
        .step-claude { border-color: #3498db; }
        .step-env { border-color: #e74c3c; }
        .step-claudemd { border-color: #1abc9c; }
        .step-verify { border-color: #2ecc71; }

        .status-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #d4edda;
            padding: 12px 18px;
            border-radius: 8px;
            margin: 12px 0;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .toast {
            background: #2c3e50;
            color: white;
            padding: 10px 18px;
            border-radius: 8px;
            font-size: 0.85em;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateX(40px);
            animation: toastIn 0.3s ease forwards, toastOut 0.3s ease 1.5s forwards;
        }

        @keyframes toastIn {
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes toastOut {
            to { opacity: 0; transform: translateX(40px); }
        }

        .tip {
            background: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 10px 16px;
            border-radius: 0 8px 8px 0;
            margin: 12px 0;
            font-size: 0.9em;
            color: #6d4c00;
        }
    </style>
</head>
<body>
    <div id="nav-container"></div>

    <div class="header">
        <h1>ðŸ¤– Claude Code Setup Guide</h1>
        <p>Ollama Embeddings + Qdrant Vector Store for Codebase Indexing</p>

        <div class="architecture">
            <div class="arch-box">
                <div class="arch-icon">ðŸ¦™</div>
                <div class="arch-name">Ollama</div>
                <div class="arch-label">Embedder</div>
            </div>
            <div class="arch-arrow">â†’</div>
            <div class="arch-box">
                <div class="arch-icon">ðŸ§ </div>
                <div class="arch-name">nomic-embed-text</div>
                <div class="arch-label">1536 dimensions</div>
            </div>
            <div class="arch-arrow">â†’</div>
            <div class="arch-box">
                <div class="arch-icon">ðŸ“¦</div>
                <div class="arch-name">Qdrant</div>
                <div class="arch-label">Vector Store</div>
            </div>
            <div class="arch-arrow">â†’</div>
            <div class="arch-box">
                <div class="arch-icon">ðŸ¤–</div>
                <div class="arch-name">Claude Code</div>
                <div class="arch-label">Semantic Search</div>
            </div>
        </div>
    </div>

    <div class="container">

        <!-- Step 1: Prerequisites -->
        <div class="step-card step-prereq">
            <h2><span class="step-number">1</span> Prerequisites</h2>
            <p>Install these tools before starting:</p>
            <ul>
                <li><strong>Ollama</strong> â€” Local LLM runner (<a href="https://ollama.com" target="_blank">ollama.com</a>)</li>
                <li><strong>Docker Desktop</strong> â€” For running Qdrant container</li>
                <li><strong>VS Code</strong> + <strong>Claude Code extension</strong></li>
            </ul>
        </div>

        <!-- Step 2: Ollama Setup -->
        <div class="step-card step-ollama">
            <h2><span class="step-number">2</span> Ollama Setup</h2>
            <p>Install Ollama and pull the embedding model:</p>

            <div class="code-block">
                <button class="copy-code-btn" title="Copy">ðŸ“‹</button>
                <div class="code-label">Terminal</div>
<span class="comment"># Install Ollama (Windows â€” download from ollama.com)</span>
<span class="comment"># Then pull the embedding model:</span>
<span class="flag">ollama pull nomic-embed-text</span>

<span class="comment"># Verify it's running:</span>
<span class="flag">curl http://localhost:11434/api/tags</span>
            </div>

            <div class="tip">ðŸ’¡ Ollama runs on port <strong>11434</strong> by default. The <code>nomic-embed-text</code> model generates 1536-dimensional vectors.</div>
        </div>

        <!-- Step 3: Qdrant Setup -->
        <div class="step-card step-qdrant">
            <h2><span class="step-number">3</span> Qdrant Vector Store</h2>
            <p>Run Qdrant in Docker with an API key:</p>

            <div class="code-block">
                <button class="copy-code-btn" title="Copy">ðŸ“‹</button>
                <div class="code-label">Terminal</div>
<span class="flag">docker run -d \
  --name qdrant \
  -p 6333:6333 \
  -e QDRANT__SERVICE__API_KEY=qdrant-secure-key-2026 \
  qdrant/qdrant</span>

<span class="comment"># Verify it's running:</span>
<span class="flag">curl http://localhost:6333/healthz</span>
            </div>

            <table class="config-table">
                <tr><th>Setting</th><th>Value</th></tr>
                <tr><td>Container Name</td><td><code>qdrant</code></td></tr>
                <tr><td>Port</td><td><code>6333</code></td></tr>
                <tr><td>API Key</td><td><code>qdrant-secure-key-2026</code></td></tr>
                <tr><td>Image</td><td><code>qdrant/qdrant</code></td></tr>
            </table>
        </div>

        <!-- Step 4: Claude Code Codebase Indexing -->
        <div class="step-card step-claude">
            <h2><span class="step-number">4</span> Claude Code â€” Codebase Indexing Settings</h2>
            <p>Open VS Code settings and configure <strong>Codebase Indexing</strong>:</p>

            <table class="config-table">
                <tr><th>Setting</th><th>Value</th><th>Note</th></tr>
                <tr>
                    <td>Enable Codebase Indexing</td>
                    <td><span class="badge badge-green">Enabled</span></td>
                    <td>Check the box</td>
                </tr>
                <tr>
                    <td>Embedder Provider</td>
                    <td><code>Ollama</code></td>
                    <td>Dropdown selection</td>
                </tr>
                <tr>
                    <td>Ollama Base URL</td>
                    <td><code>http://localhost:11434</code></td>
                    <td>Default Ollama port</td>
                </tr>
                <tr>
                    <td>Model</td>
                    <td><code>nomic-embed-text</code></td>
                    <td>Embedding model</td>
                </tr>
                <tr>
                    <td>Model Dimension</td>
                    <td><code>1536</code></td>
                    <td>Must match model output</td>
                </tr>
                <tr>
                    <td>Vector Store Provider</td>
                    <td><code>Qdrant</code></td>
                    <td>Dropdown selection</td>
                </tr>
                <tr>
                    <td>Qdrant URL</td>
                    <td><code>http://localhost:6333</code></td>
                    <td>Docker mapped port</td>
                </tr>
                <tr>
                    <td>Qdrant API Key</td>
                    <td><code>â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</code></td>
                    <td>From .env file</td>
                </tr>
            </table>

            <h3 style="margin-top: 18px; color: #4a5568; font-size: 1em;">Advanced Configuration</h3>
            <table class="config-table">
                <tr><th>Setting</th><th>Value</th><th>Description</th></tr>
                <tr>
                    <td>Search Score Threshold</td>
                    <td><code>0.40</code></td>
                    <td>Minimum similarity score for results</td>
                </tr>
                <tr>
                    <td>Maximum Search Results</td>
                    <td><code>50</code></td>
                    <td>Max vectors returned per query</td>
                </tr>
                <tr>
                    <td>Embedding Batch Size</td>
                    <td><code>60</code></td>
                    <td>Files processed per batch</td>
                </tr>
                <tr>
                    <td>Scanner Max Batch Retries</td>
                    <td><code>3</code></td>
                    <td>Retry count on failure</td>
                </tr>
            </table>
        </div>

        <!-- Step 5: .env File -->
        <div class="step-card step-env">
            <h2><span class="step-number">5</span> .env File</h2>
            <p>Create a <code>.env</code> file at the project root to store sensitive config. Make sure it's in <code>.gitignore</code>.</p>

            <div class="code-block">
                <button class="copy-code-btn" title="Copy">ðŸ“‹</button>
                <div class="code-label">.env</div>
<span class="comment"># Ollama Embedder</span>
<span class="key">OLLAMA_BASE_URL</span>=<span class="value">http://localhost:11434</span>
<span class="key">OLLAMA_EMBED_MODEL</span>=<span class="value">nomic-embed-text</span>
<span class="key">OLLAMA_EMBED_DIMENSION</span>=<span class="value">1536</span>

<span class="comment"># Qdrant Vector Store</span>
<span class="key">QDRANT_URL</span>=<span class="value">http://localhost:6333</span>
<span class="key">QDRANT_API_KEY</span>=<span class="value">qdrant-secure-key-2026</span>

<span class="comment"># Search Settings</span>
<span class="key">SEARCH_SCORE_THRESHOLD</span>=<span class="value">0.40</span>
<span class="key">MAX_SEARCH_RESULTS</span>=<span class="value">50</span>
<span class="key">EMBEDDING_BATCH_SIZE</span>=<span class="value">60</span>
<span class="key">SCANNER_MAX_BATCH_RETRIES</span>=<span class="value">3</span>
            </div>

            <div class="code-block">
                <button class="copy-code-btn" title="Copy">ðŸ“‹</button>
                <div class="code-label">.gitignore (add this line)</div>
<span class="value">.env</span>
            </div>
        </div>

        <!-- Step 6: CLAUDE.md -->
        <div class="step-card step-claudemd">
            <h2><span class="step-number">6</span> CLAUDE.md â€” Project Instructions</h2>
            <p>Create a <code>CLAUDE.md</code> at the project root. Claude Code reads this file automatically to understand your project context, conventions, and architecture.</p>

            <div class="code-block">
                <button class="copy-code-btn" title="Copy">ðŸ“‹</button>
                <div class="code-label">CLAUDE.md (template)</div>
<span class="comment"># CLAUDE.md - Project Instructions</span>

<span class="comment">## Project: [Your Project Name]</span>
<span class="value">[Brief description of the project]</span>

<span class="comment">## Structure</span>
<span class="value">[Folder layout and what each folder contains]</span>

<span class="comment">## Key Files</span>
<span class="value">[List the most important files and what they do]</span>

<span class="comment">## Conventions</span>
<span class="value">[Coding patterns, style rules, tooling preferences]</span>

<span class="comment">## Local Services</span>
<span class="value">- Ollama: http://localhost:11434</span>
<span class="value">- Qdrant: http://localhost:6333</span>

<span class="comment">## Deploy</span>
<span class="value">[Deployment target URL or instructions]</span>
            </div>

            <div class="tip">ðŸ’¡ CLAUDE.md is loaded into the system prompt automatically. Keep it under 200 lines for best results. Focus on stable patterns, not session-specific details.</div>
        </div>

        <!-- Step 7: Verification -->
        <div class="step-card step-verify">
            <h2><span class="step-number">7</span> Verification</h2>
            <p>After configuring everything, check that codebase indexing is active:</p>

            <div class="status-box">
                <div class="status-dot"></div>
                <strong style="color: #155724;">Indexed â€” Index up-to-date. File queue empty.</strong>
            </div>

            <p>Run these checks to confirm each service:</p>

            <div class="code-block">
                <button class="copy-code-btn" title="Copy">ðŸ“‹</button>
                <div class="code-label">Verify all services</div>
<span class="comment"># 1. Check Ollama is running</span>
<span class="flag">curl http://localhost:11434/api/tags</span>
<span class="comment"># Should list nomic-embed-text</span>

<span class="comment"># 2. Check Qdrant is healthy</span>
<span class="flag">curl http://localhost:6333/healthz</span>
<span class="comment"># Should return "ok"</span>

<span class="comment"># 3. Check Qdrant collections</span>
<span class="flag">curl -H "api-key: qdrant-secure-key-2026" \
  http://localhost:6333/collections</span>
<span class="comment"># Should show your indexed collection</span>

<span class="comment"># 4. Check Docker container</span>
<span class="flag">docker ps --filter name=qdrant</span>
            </div>

            <div class="tip">ðŸ’¡ If indexing stalls, try: <strong>Clear Index Data</strong> button in settings, then reopen the project folder to re-trigger indexing.</div>
        </div>

    </div>

    <div class="toast-container" id="toast-container"></div>

    <script>
        // Toast notification
        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
        }

        // Copy code blocks to clipboard
        document.querySelectorAll('.code-block').forEach(block => {
            const btn = block.querySelector('.copy-code-btn');
            if (!btn) return;
            btn.addEventListener('click', function() {
                // Get the text content, excluding the button and label
                const label = block.querySelector('.code-label');
                const lines = [];
                block.childNodes.forEach(node => {
                    if (node === btn || node === label) return;
                    if (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE) {
                        const text = node.textContent;
                        if (text.trim()) lines.push(text);
                    }
                });
                const code = lines.join('').replace(/^\n+|\n+$/g, '');

                navigator.clipboard.writeText(code).then(function() {
                    showToast('Copied to clipboard');
                }).catch(function() {
                    const textArea = document.createElement('textarea');
                    textArea.value = code;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showToast('Copied to clipboard');
                });
            });
        });
    </script>

    <script>
        fetch('nav_4formula.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('nav-container').innerHTML = data;
            document.querySelector('a[href="claude_setup_guide.html"]').classList.add('active');
        });
    </script>
</body>
</html>